<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Recover Accidently Removed Namespace Folder and Targets ¬∑ Windows Server Talks</title>

  <!-- ‚úÖ Correct project-page paths -->
  <link rel="stylesheet" href="/WindowsServerTalks/assets/css/custom.css">
  <script src="/WindowsServerTalks/assets/js/site.js" defer></script>
</head>

<body>
  <a class="skip-link" href="#main-content">Skip to content</a>

  <header class="site-header">
    <div class="container">
      <h1>Windows Server Talks</h1>
      <p class="tagline">DFS, Active Directory, Hyper‚ÄëV, and PowerShell guides by Mohit Maurya</p>
    </div>
  </header>

  <!-- Breadcrumbs -->
  <nav class="breadcrumbs container" aria-label="Breadcrumb">
    <a href="/WindowsServerTalks/index.html">Home</a>
    <span aria-hidden="true">‚Ä∫</span>
    <span aria-current="page">Recover Deleted DFS‚ÄëN Links</span>
  </nav>

  <div class="layout container">
    <nav class="sidebar" aria-label="Primary">
      <h3>üìö Contents</h3>
      <ul>
        <li><a href="/WindowsServerTalks/domain-based-dfs-n-auto-backup.html">DFS‚ÄëN Auto Backup</a></li>
        <li><a href="/WindowsServerTalks/recover-deleted-dfs-n-links.html" aria-current="page">Recover Deleted DFS‚ÄëN Links</a></li>
        <li><a href="/WindowsServerTalks/index.html">‚Üê Back to Home</a></li>
      </ul>
    </nav>

    <main id="main-content" class="content" role="main">

      <h2>Recover accidently removed namespace folder and targets when AD‚ÄëRecycle Bin is Enabled</h2>

      <div class="card">
        <h3>Summary</h3>
        <p>
          This article provides a detailed guide on <strong>recovering accidentally deleted DFS namespace
          links and their targets</strong> using <strong>Active Directory Recycle Bin</strong>.
        </p>
        <p>
          <strong>Note:</strong> Only <strong>subfolders (links)</strong> and <strong>targets</strong> can be
          recovered using this method. Full namespace deletion requires backups.
        </p>
      </div>

      <h2>Step 1: Check if something is deleted</h2>

      <pre><code class="language-powershell">
Import-Module ActiveDirectory
$LogFolder = "C:\DFSlogs"
if (!(Test-Path -Path $LogFolder)) {
    New-Item -Path $LogFolder -ItemType Directory | Out-Null
}
$CurrentDate = Get-Date
$DeletedDFSObjects = Get-ADObject `
    -Filter 'ObjectClass -eq "msDFS-Linkv2" -and isDeleted -eq $true' `
    -IncludeDeletedObjects `
    -Properties DistinguishedName, Name, ObjectClass, whenChanged, ObjectGUID
$Result = $DeletedDFSObjects | Select-Object `
    Name, ObjectClass, DistinguishedName,
    @{Name="ObjectGUID"; Expression={$_.ObjectGUID}},
    @{Name="DeletedOn"; Expression={($_.whenChanged).ToString("dd-MMM-yyyy HH:mm")}},
    @{Name="Age"; Expression={
        if ($_.whenChanged) {
            $diff = $CurrentDate - $_.whenChanged
            if ($diff.Days -ge 1) { "$($diff.Days) days ago" }
            else { "$([math]::Round($diff.TotalHours,1)) hours ago" }
        } else { "N/A" }
    }}
$Result | Out-GridView -Title "Deleted DFS Links Report"
      </code></pre>

      <h2>Sample Output</h2>

      <h3>Deleted DFS Links ‚Äî Interactive Report</h3>
      <img class="doc-image"
           src="/WindowsServerTalks/images/Image4.png"
           alt="Out-GridView sample showing deleted DFS links"
           onclick="openLightbox(this.src)">

      <h3>Deleted DFS Links ‚Äî CSV Export</h3>
      <img class="doc-image"
           src="/WindowsServerTalks/images/Image5.png"
           alt="CSV export showing deleted DFS links"
           onclick="openLightbox(this.src)">

      <h2>Expected Results</h2>

      <h3>Restored Objects</h3>
      <img class="doc-image"
           src="/WindowsServerTalks/images/Image6.png"
           alt="Restored DFS links"
           onclick="openLightbox(this.src)">

      <h3>Restore Logs</h3>
      <img class="doc-image"
           src="/WindowsServerTalks/images/image7.png"
           alt="DFS restore log output"
           onclick="openLightbox(this.src)">

    </main>
  </div>

  <footer class="site-footer">
    <div class="container">
      <p>¬© 2026 Mohit Maurya ¬∑ Windows Server Talks</p>
    </div>
  </footer>
</body>
</html>
